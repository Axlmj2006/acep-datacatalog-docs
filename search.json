[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ACEP Data Catalog User Guides",
    "section": "",
    "text": "Welcome\nThis documentation provides some helpful tutorials for working with the ACEP Data Catalog.",
    "crumbs": [
      "Welcome"
    ]
  },
  {
    "objectID": "getting_started.html",
    "href": "getting_started.html",
    "title": "1  Getting Started",
    "section": "",
    "text": "Making an Account",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "getting_started.html#making-an-account",
    "href": "getting_started.html#making-an-account",
    "title": "1  Getting Started",
    "section": "",
    "text": "Click the Register button in the upper right corner of the screen.\nFill out your information, using your UA email if you have one. \nIn order to see the Internal Use datasets or post datasets, you will need permissions granted to your account. If you are an ACEP employee, contact Liz or another admin.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "getting_started.html#searching-for-datasets",
    "href": "getting_started.html#searching-for-datasets",
    "title": "1  Getting Started",
    "section": "Searching for Datasets",
    "text": "Searching for Datasets\nThere are multiple ways to search for datasets\n\nSearch Bar\nUse key words to find datasets, just like Google.\nGroups\nBrowse through the groups that can be found at the Groups tab at the top of the screen or listed on the home page. \nOrganizations",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "getting_started.html#submitting-a-commentcomplaint",
    "href": "getting_started.html#submitting-a-commentcomplaint",
    "title": "1  Getting Started",
    "section": "Submitting a Comment/Complaint",
    "text": "Submitting a Comment/Complaint\nIf you find a problem with a dataset or have a comment or suggestion for the data catalog, please contact the ACEP data team at uaf-acep-dcm-support@alaska.edu.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "researcher.html",
    "href": "researcher.html",
    "title": "2  Researcher",
    "section": "",
    "text": "Posting a Dataset\nThere are two ways to access the Add Dataset button:",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Researcher</span>"
    ]
  },
  {
    "objectID": "researcher.html#posting-a-dataset",
    "href": "researcher.html#posting-a-dataset",
    "title": "2  Researcher",
    "section": "",
    "text": "Click on the Datasets tab at the top of the screen\nClick on the Organizations tab at the top of the screen and select the organization you want to add a dataset to:\n\nChoose ACEP Open Data if you are posting your own data or data that ACEP owns.\nChoose ACEP Internal Use if you are posting a useful dataset that ACEP does not own.\n\n\n\nClick on the Add Dataset button above the search bar.\nOn the first page, fill out the metadata fields for your dataset. \n\nDouble check the organization field.\n\nChoose ACEP Open Data if you are posting your own data or data that ACEP owns.\nChoose ACEP Internal Use if you are posting a useful dataset that ACEP does not own.\n\nIf you are a researcher, your dataset’s visibility will automatically be set to private. An admin will review your dataset and make it public.\n\nOnce you have completed the metadata fields, click the Next: Add Data button at the bottom of the form.\nOn the next page, add the data resources to your dataset. \n\nSmall datasets (&lt;2MB) can be uploaded directly to the catalog\nAlternatively, enter a link to where the data is stored, such as a GitHub repository or Google Drive.\n\nIf you have more resources to add, click the Save & add another button at the bottom of the form. Otherwise click Finish to post your dataset.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Researcher</span>"
    ]
  },
  {
    "objectID": "researcher.html#tagging-a-dataset",
    "href": "researcher.html#tagging-a-dataset",
    "title": "2  Researcher",
    "section": "Tagging a Dataset",
    "text": "Tagging a Dataset\nTBD",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Researcher</span>"
    ]
  },
  {
    "objectID": "researcher.html#editingdeleting-a-dataset",
    "href": "researcher.html#editingdeleting-a-dataset",
    "title": "2  Researcher",
    "section": "Editing/Deleting a Dataset",
    "text": "Editing/Deleting a Dataset\n\nNavigate to the dataset page and click on the Manage button in the upper right. \nThis displays the Edit metadata page where you can change the metadata of the dataset. After making changes, click the Update Dataset button at the bottom of the form.\n\nTo delete the dataset, click the Delete button at the bottom of the form.\n\n\nNOTE: Deleting a dataset does not remove it completely from the database. The url of the deleted dataset will not be able to be reused until it has been purged by a sysadmin.\n\nTo edit the resources or add more resources, click on the Resources tab. \n\nTo delete a resource, select it from the list and then click the Delete button at the bottom of the page.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Researcher</span>"
    ]
  },
  {
    "objectID": "researcher.html#adding-a-dataset-to-a-group",
    "href": "researcher.html#adding-a-dataset-to-a-group",
    "title": "2  Researcher",
    "section": "Adding a Dataset to a Group",
    "text": "Adding a Dataset to a Group\n\nNavigate to the dataset page and click on the Groups tab. \nSelect a group from the dropdown menu and click the Add to group button.\nTo remove the dataset from a group, hover your cursor over the group and click the Remove button.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Researcher</span>"
    ]
  },
  {
    "objectID": "researcher.html#creating-a-new-group",
    "href": "researcher.html#creating-a-new-group",
    "title": "2  Researcher",
    "section": "Creating a New Group",
    "text": "Creating a New Group\nGroups are a good way to group together datasets that are connected. You may want to create groups for common research themes, funding organizations, or projects. 1. Click on the Groups tab at the top of the screen. 2. Click the Add Group button.  3. Enter the information for the group. Find a logo or simple image to upload to represent the group.\n4. Once you have entered the information, click the Create Group button at the bottom of the form.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Researcher</span>"
    ]
  },
  {
    "objectID": "admin.html",
    "href": "admin.html",
    "title": "3  Admin",
    "section": "",
    "text": "Giving User Permissions",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Admin</span>"
    ]
  },
  {
    "objectID": "admin.html#reviewing-a-dataset",
    "href": "admin.html#reviewing-a-dataset",
    "title": "3  Admin",
    "section": "Reviewing a Dataset",
    "text": "Reviewing a Dataset",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Admin</span>"
    ]
  },
  {
    "objectID": "admin.html#deleting-datasetsgroupsorganizations",
    "href": "admin.html#deleting-datasetsgroupsorganizations",
    "title": "3  Admin",
    "section": "Deleting Datasets/Groups/Organizations",
    "text": "Deleting Datasets/Groups/Organizations",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Admin</span>"
    ]
  },
  {
    "objectID": "admin.html#restoring-a-deleted-user",
    "href": "admin.html#restoring-a-deleted-user",
    "title": "3  Admin",
    "section": "Restoring a Deleted User",
    "text": "Restoring a Deleted User\nWhen a user is deleted from the website, their information remains in the database with the state field set to deleted. To reactivate the user, you must set this field to active in the database.\n\nEnter the acep-db-cont docker container\n\n&gt; docker exec -it acep-db-cont /bin/bash\n\n\nAccess the postgres database\n\n&gt; psql -U postgres\n\n\nList all the databases and connect to the ckandb database.\n\n&gt; \\l\n&gt; \\c ckandb\n\nList all the tables and list the columns of the user table.\n\n&gt; \\d\n&gt; \\d user\n\nList all the users in the user table.\n\n&gt; SELECT * FROM public.user\n\nFind the deleted user with the username [username].\n\n&gt; SELECT id, name, email, state FROM public.user WHERE name = ‘[username]’\n\nUpdate the user’s state field.\n\n&gt; UPDATE public.user SET state = ‘active’ WHERE name = ‘[username]’\n\nFind the user again and ensure that the state field is set to active.\n\n&gt; SELECT id, name, email, state FROM public.user WHERE name = ‘[username]’",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Admin</span>"
    ]
  },
  {
    "objectID": "documentation.html",
    "href": "documentation.html",
    "title": "For Developers",
    "section": "",
    "text": "Developing the Data Catalog\nThe ACEP Data Catalog is run on a VM hosted by RCS. Extensions can be updated by pushing to the acepportal-ckan GitHub repository. After pushing, changes take ~30 min to update on the main site.",
    "crumbs": [
      "For Developers"
    ]
  },
  {
    "objectID": "documentation.html#developing-the-data-catalog",
    "href": "documentation.html#developing-the-data-catalog",
    "title": "For Developers",
    "section": "",
    "text": "Creating a Local Instance\nCreating a local version of the data catalog is a useful tool for developing and testing new features.\n\nInstall Docker: https://www.docker.com/get-started/\n\nClone the ACEP CKAN repository from Github: https://github.com/UAF-RCS/acepportal-ckan.git\n\nCreate a replica of the main VM CKAN instance by copying over the source files, storage files, ckan.ini file, and database backups.\nThese files are located on the VM inside /opt/ckan/backups. Use scp to copy the files onto your machine\n\nscp user@portal.lab.acep.uaf.edu:/opt/ckan/backups/app_[date].tar.bz2 .\nscp user@portal.lab.acep.uaf.edu:/opt/ckan/backups/app_storage_[date].tar.bz2 .\nscp user@portal.lab.acep.uaf.edu:/opt/ckan/backups/ckandb_[date].tar .\nscp user@portal.lab.acep.uaf.edu:/opt/ckan/backups/datastore_[date].tar .\n\nUse tar to decompress the source and storage tar files\n\ntar -jxvf app_[date].tar.bz2\ntar -jxvf app_[date].tar.bz2\n\nPlace the source files and storage files inside of acepportal-ckan/ckan-src\nCreate a backups folder alongside the acepportal-ckan repository on your machine.\nCreate the .env file inside the main acepportal-ckan folder. Copy the contents from the .env.example file.\nSpecify the location of the source files, storage files, backups, etc. in the .env file.\nFor example:\n# CKAN Mounts Directory\nCKAN_EXTENSIONS_MOUNT=./ckan-extension\nSRC_EXTENSIONS_PATH=/srv/app/src_extensions\nCKAN_SOURCE_MOUNT=./ckan-src/src\nCKAN_STORAGE_MOUNT=./ckan-src/storage\nCKAN_INI_MOUNT=./ckan-src/ckan.ini\nBuild the containers using,\n\ndocker compose up\n\nOnce the containers are up, use the import_database.sh bash script to import the database.\n\nbash import_database.sh\n\nRebuild the CKAN search index.\n\ndocker exec -it acep-ckan-cont /bin/bash\ncd /srv/app\nckan search-index rebuild\n\n\n\n\nCreate a New Extension\n\nEnter the acep-ckan-cont Docker container\n\n\ndocker exec -it acep-ckan-cont /bin/bash and run the following command\nckan generate extension -o /srv/app/src/ckan-extension This will create an extension in the ckan-extension folder which can be edited outside of the container.\n\n\nAdd the extension name to the CKAN_PLUGINS list in the .env file.\nRun docker compose up -d --build ckan\n\n\n\nInstall an Extension\n\nEnsure that the extension supports CKAN 2.10.4 and Python 3.10 Clone the extension repository into the ckan-extension folder.\nEnsure that all dependencies for the extension are listed in requirements.txt or a similar file.\nAdd the extension name to the CKAN_PLUGINS list in the .env file.\nRun docker compose up -d --build ckan\n\n\n\nUpdating the Main Site\nTo add a feature from your local instance to the main Data Catalog,\n\nPush the files to the acepportal-ckan GitHub repository.\nWait about 30 min. for the changes to be pulled to VM.\nIf you have added a new extension, ssh into the VM and add the extension name to the .env file.",
    "crumbs": [
      "For Developers"
    ]
  },
  {
    "objectID": "documentation.html#extensions",
    "href": "documentation.html#extensions",
    "title": "For Developers",
    "section": "Extensions",
    "text": "Extensions\n\nCurrently Installed\n\nckanext-customtheme\nAuthor: Jenae Matson\nPurpose: Add custom theming and features for the CKAN instance, including\n\nACEP logos, colors, and fonts\nHome page layout, images, and featured dataset\nChanged font weight of Register button\nAdded tags to search page display\nHTML file for About page text\nRemoved social media links from dataset/resources pages\nAdded support contact info to dataset sidebar\nAdded default blank option to add-to-group dropdown menu\n\n\n\nckanext-faqpage\nAuthor: Jenae Matson\nPurpose: Create an FAQ page linked in the masthead with collapsible boxes for questions and answers.\n\n\nckanext-restrictpublish\nAuthor: Jenae Matson\nPurpose: Restrict the ability to ochange the visibility of a dataset to admins only. Datasets posted by editors default to private.\n\n\nckanext-geoview\nLink: https://github.com/ckan/ckanext-geoview\nPurpose: Created resource views for geojson and other geo-data file types. We have implemented the OpenLayers Viewer.\n\n\nckanext-package-group-permissions\nLink: https://github.com/salsadigitalauorg/ckanext-package-group-permissions\nPurpose: Allows all editors and admins to add datasets to any group, without having to be added as members to each group.\nModifications: This extension was created and works with CKAN 2.9. This instance is version 2.10, so the extension requires some small modifications to work. The following changes were made to the original extension:\n\nIn the file plugin.py, change the member_create function to the following\n\ndef member_create(self, next_auth, context, data_dict):\n    \"\"\"\n    This code is largely borrowed from /src/ckan/ckan/logic/auth/create.py\n    With a modification to allow users to add datasets to any group\n    :param context:\n    :param data_dict:\n    :return:\n    \"\"\"\n    group = logic_auth.get_group_object(context, data_dict)\n\n    authorized = False\n    if not group.is_organization and data_dict.get('object_type') == 'package':\n        authorized = helpers.user_has_admin_access(include_editor_access=True)\n\n    if not authorized:\n        # Fallback to the default CKAN behaviour\n        return next_auth(context, data_dict)\n    else:\n        return {'success': True}\n\nIn the the file templates/package/group_list.html, add the line { h.csrf_input() } to the beginning of the two post forms, as follows\n\n{% if groups %}\n&lt;form class=\"add-to-group\" method=\"post\"&gt;\n    {{ h.csrf_input() }}\n    ...\n&lt;/form&gt;\n{% endif %}\n{% if c.pkg_dict.groups %}\n&lt;form method=\"post\"&gt;\n    {{ h.csrf_input() }}\n    ...\n{% endif %}\n\n\nckanext-scheming\nLink: https://github.com/ckan/ckanext-scheming\nPurpose: Allows for the creation of alternate metadata templates (schemas) defined by .yaml or .json files.\n\n\n\nAdding Alternate Schemas with ckanext-scheming\n\nCreate a .yaml or .json file in the folder ckanext-scheming/ckanext/scheming to define the metadata schema. See extension documentation for more information and examples.\n\nIn ckan.ini, add your schema to the scheming.dataset_schemas config option. For example:\n\n\nscheming.dataset_schemas = ckanext.scheming:arctic_dataset.json   \n                            ckanext.scheming:geo_dataset.json\n\nThe new dataset creation form is located at a url defined by the schema type name. For example, the creation form for datasets of type arctic-dataset is located at /arctic-dataset/new. You can define a new Add Dataset button using this new url.\n\n\n\nAttempted Extensions\n\nckanext-spatial\nLink: https://github.com/ckan/ckanext-spatial\nPurpose: This extension adds the ability to search for datasets on a map widget, as well as a dataset extent map widget on the dataset page, provided correct geospatial metadata.\nProblems: This extension is not currently installed due to the following,\n\nConfiguring map tiles for ckanext-spatial caused the map tiles for ckanext-geoview to disappear.\nDatasets with the required spatial metadata were not searchable on the map search widget, although the dataset extent widet worked correctly.\n\n\n\nckanext-oidc-pkce\nLink: https://github.com/DataShades/ckanext-oidc-pkce/tree/master\nPurpose: This extension allows for users to be authenticated through an external application when they login.\nProblems: Ideally users on the ACEP Data Catalog would be able to login using their UA login credentials through Google Authentication. This extension installs correctly, but does not seem to support Google Authentication.",
    "crumbs": [
      "For Developers"
    ]
  }
]